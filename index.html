<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿç©ºæ²»æ„ˆç²’å­ | è§£å‹å°æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            background-color: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: radial-gradient(ellipse at center, #0a0a2a 0%, #000000 100%);
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .header {
            position: relative;
            z-index: 10;
            text-align: center;
            margin-bottom: 30px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px 40px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #9AD2E9, #D4F0F6, #FAF5D0);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(154, 210, 233, 0.5);
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #9AD2E9;
            font-weight: 300;
        }
        
        .instructions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 1.1rem;
            color: #D4F0F6;
        }
        
        .color-scheme-info {
            margin-top: 15px;
            font-size: 1rem;
            color: #FAF5D0;
            padding: 10px;
            border-radius: 10px;
            background-color: rgba(57, 135, 168, 0.3);
        }
        
        .current-color {
            font-weight: bold;
            color: #FAF5D0;
        }
        
        .footer {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 10;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            padding: 10px;
        }
        
        .particle-count {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 1rem;
            color: #D4F0F6;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .theme-dots {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            display: flex;
            gap: 10px;
        }
        
        .theme-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s, border-color 0.3s;
        }
        
        .theme-dot:hover {
            transform: scale(1.2);
            border-color: white;
        }
        
        .theme-dot.active {
            border-color: white;
            transform: scale(1.2);
            box-shadow: 0 0 10px white;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>å˜¿ï¼Œå’±ä»¬ä¸€èµ·æ”¾çƒŸèŠ±å§ã€‚</h1>
        <div class="subtitle">é¼ æ ‡æ»‘è¿‡å±å¹•ï¼Œä½“éªŒæµæ˜ŸçƒŸèŠ±ä¸æ°´æ™¶éŸ³æ•ˆ</div>
        <div class="instructions">
            <div>âœ¨ ç§»åŠ¨é¼ æ ‡åˆ›å»ºæ²»æ„ˆç²’å­æ•ˆæœ</div>
            <div>ğŸ’– ä½ å·²ç»å¾ˆæ£’äº†ï¼Œæ˜¯æ—¶å€™ä¼‘æ¯ä¸€ä¸‹äº†</div>
            <div>ğŸ¨ æŒ‰ <kbd>Enter</kbd> é”®æˆ–ç‚¹å‡»ä¸Šæ–¹è‰²ç‚¹åˆ‡æ¢é…è‰²æ–¹æ¡ˆ</div>
            <div>ğŸŒŒ ç²’å­ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¿æŒç”»é¢æ¸…æ–°</div>
        </div>
        <div class="color-scheme-info">
            å½“å‰é…è‰²: <span class="current-color" id="current-color-name">æµ…æµ…æœˆå…‰</span>
        </div>
    </div>
    
    <div class="theme-dots" id="theme-dots"></div>
    
    <div class="particle-count">
        ç²’å­æ•°: <span id="particle-count">0</span>
    </div>
    
    <canvas id="particleCanvas"></canvas>
    
    <div class="footer">
        æ”¾æ¾å¿ƒæƒ…ï¼Œäº«å—è¿™æ²»æ„ˆæ—¶åˆ» | æ¯ä¸ªç²’å­éƒ½æ˜¯ç‹¬ç‰¹çš„ç”Ÿå‘½ï¼Œè½»è½»æ»‘è¿‡ï¼Œç»½æ”¾ç„¶åæ¶ˆé€
    </div>

    <script>
        // è·å–Canvaså…ƒç´ å’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®Canvaså°ºå¯¸ä¸ºçª—å£å¤§å°
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // å­˜å‚¨æ‰€æœ‰ç²’å­
        let particles = [];
        // ç²’å­è®¡æ•°å™¨
        let particleCount = 0;
        
        // å®šä¹‰é…è‰²æ–¹æ¡ˆ
        const colorSchemes = [
            {
                name: "æµ…æµ…æœˆå…‰",
                colors: ["#3987A8", "#6DB9D9", "#9AD2E9", "#D4F0F6", "#FAF5D0"],
                bgGradient: ["#0a0a2a", "#000000"]
            },
            {
                name: "ä¹Œæ–¯æ€€äºš",
                colors: ["#0081D1", "#76BCEF", "#DFDFF0", "#D6DFF1", "#81A2D0"],
                bgGradient: ["#0a1a2a", "#000010"]
            },
            {
                name: "æš–æš–è®°å¿†",
                colors: ["#AA0C1D", "#E20000", "#D4AF73", "#FBF9E2", "#FBD997"],
                bgGradient: ["#2a0a0a", "#100000"]
            },
            {
                name: "æ¬¢åº†æ—¶åˆ»",
                colors: ["#B60000", "#EC0000", "#FFBF36", "#FEE9DC", "#FCEBA3"],
                bgGradient: ["#2a0a14", "#100005"]
            },
            {
                name: "ä¸‡ç‰©æ–°ç”Ÿ",
                colors: ["#08739D", "#4984AC", "#E7EEF8", "#6D9D39", "#AEC60C"],
                bgGradient: ["#0a2a1a", "#001005"]
            }
        ];
        
        // å½“å‰é…è‰²æ–¹æ¡ˆç´¢å¼•
        let currentColorScheme = 0;
        
        // åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡å’ŒéŸ³æ•ˆ
        let audioContext;
        let gainNode;
        
        // åˆå§‹åŒ–éŸ³é¢‘
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
                gainNode.gain.value = 0.3; // è®¾ç½®éŸ³é‡
            } catch (e) {
                console.log("Web Audio API ä¸æ”¯æŒæˆ–å·²ç¦ç”¨");
            }
        }
        
        // æ’­æ”¾æ°´æ™¶éŸ³æ•ˆ
        function playCrystalSound(x, y) {
            if (!audioContext) return;
            
            // æ ¹æ®é¼ æ ‡ä½ç½®è°ƒæ•´éŸ³é«˜
            const pitch = 300 + (y / canvas.height) * 500;
            
            // åˆ›å»ºæŒ¯è¡å™¨
            const oscillator = audioContext.createOscillator();
            oscillator.type = 'sine';
            oscillator.frequency.value = pitch;
            
            // åˆ›å»ºå¢ç›ŠèŠ‚ç‚¹ç”¨äºéŸ³é‡åŒ…ç»œ
            const volume = audioContext.createGain();
            volume.gain.setValueAtTime(0, audioContext.currentTime);
            volume.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
            volume.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
            
            // è¿æ¥èŠ‚ç‚¹
            oscillator.connect(volume);
            volume.connect(gainNode);
            
            // æ’­æ”¾å¹¶åœæ­¢éŸ³æ•ˆ
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 1);
        }
        
        // ç²’å­ç±»
        class Particle {
            constructor(x, y, colorScheme) {
                this.x = x;
                this.y = y;
                this.colorScheme = colorScheme;
                this.color = this.getRandomColor();
                this.size = Math.random() * 8 + 2;
                this.speedX = (Math.random() * 6 - 3) * (Math.random() > 0.5 ? 1 : -1);
                this.speedY = (Math.random() * 6 - 3) * (Math.random() > 0.5 ? 1 : -1);
                this.life = 1.0; // ç²’å­ç”Ÿå‘½å‘¨æœŸ (1.0 åˆ° 0.0)
                this.decay = Math.random() * 0.02 + 0.005; // è¡°å‡é€Ÿåº¦
                this.trail = [];
                this.maxTrailLength = Math.floor(Math.random() * 10) + 5;
                this.type = Math.random() > 0.5 ? 'star' : 'sparkle'; // ç²’å­ç±»å‹
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() * 0.1 - 0.05);
                
                // å¯¹äºçƒŸèŠ±å‹ç²’å­ï¼Œæ·»åŠ æ›´å¿«çš„é€Ÿåº¦å’Œæ›´å¤šçš„åˆå§‹èƒ½é‡
                if (Math.random() > 0.7) {
                    this.type = 'firework';
                    this.speedX *= 2;
                    this.speedY *= 2;
                    this.size *= 1.5;
                }
                
                particleCount++;
            }
            
            getRandomColor() {
                const colors = colorSchemes[this.colorScheme].colors;
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            update() {
                // æ·»åŠ é‡åŠ›æ•ˆæœ
                this.speedY += 0.05;
                
                // æ›´æ–°ä½ç½®
                this.x += this.speedX;
                this.y += this.speedY;
                
                // æ·»åŠ ç©ºæ°”é˜»åŠ›
                this.speedX *= 0.99;
                this.speedY *= 0.99;
                
                // æ›´æ–°ç”Ÿå‘½å‘¨æœŸ
                this.life -= this.decay;
                
                // æ›´æ–°æ—‹è½¬
                this.rotation += this.rotationSpeed;
                
                // æ·»åŠ ä½ç½®åˆ°è½¨è¿¹
                this.trail.push({x: this.x, y: this.y, size: this.size * this.life});
                if (this.trail.length > this.maxTrailLength) {
                    this.trail.shift();
                }
                
                // å¦‚æœç²’å­è¶…å‡ºå±å¹•è¾¹ç•Œï¼Œåå¼¹æˆ–æ¶ˆå¤±
                if (this.x < 0 || this.x > canvas.width) {
                    this.speedX *= -0.8;
                    this.x = this.x < 0 ? 0 : canvas.width;
                }
                
                if (this.y < 0 || this.y > canvas.height) {
                    this.speedY *= -0.8;
                    this.y = this.y < 0 ? 0 : canvas.height;
                }
            }
            
            draw() {
                ctx.save();
                
                // ç»˜åˆ¶è½¨è¿¹
                if (this.trail.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(this.trail[0].x, this.trail[0].y);
                    
                    for (let i = 1; i < this.trail.length; i++) {
                        const point = this.trail[i];
                        ctx.lineTo(point.x, point.y);
                    }
                    
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = this.size * 0.5;
                    ctx.globalAlpha = this.life * 0.5;
                    ctx.stroke();
                }
                
                // ç»˜åˆ¶ç²’å­ä¸»ä½“
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                
                if (this.type === 'star') {
                    // ç»˜åˆ¶æ˜Ÿæ˜Ÿ
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation);
                    
                    const spikes = 5;
                    const outerRadius = this.size;
                    const innerRadius = this.size * 0.5;
                    
                    ctx.beginPath();
                    let angle = Math.PI / 2 * 3;
                    let x, y;
                    
                    for (let i = 0; i < spikes; i++) {
                        x = Math.cos(angle) * outerRadius;
                        y = Math.sin(angle) * outerRadius;
                        ctx.lineTo(x, y);
                        angle += Math.PI / spikes;
                        
                        x = Math.cos(angle) * innerRadius;
                        y = Math.sin(angle) * innerRadius;
                        ctx.lineTo(x, y);
                        angle += Math.PI / spikes;
                    }
                    
                    ctx.lineTo(0, -outerRadius);
                    ctx.closePath();
                    ctx.fill();
                    
                    // æ·»åŠ æ˜Ÿæ˜Ÿå…‰æ™•
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size * 1.5, 0, Math.PI * 2);
                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size * 1.5);
                    gradient.addColorStop(0, this.color + "80");
                    gradient.addColorStop(1, this.color + "00");
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                } else if (this.type === 'firework') {
                    // ç»˜åˆ¶çƒŸèŠ±
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // çƒŸèŠ±çˆ†ç‚¸æ•ˆæœ
                    for (let i = 0; i < 8; i++) {
                        const angle = (Math.PI * 2 / 8) * i;
                        const sparkLength = this.size * 2;
                        const sparkX = this.x + Math.cos(angle) * sparkLength;
                        const sparkY = this.y + Math.sin(angle) * sparkLength;
                        
                        ctx.beginPath();
                        ctx.moveTo(this.x, this.y);
                        ctx.lineTo(sparkX, sparkY);
                        ctx.lineWidth = this.size * 0.3;
                        ctx.strokeStyle = this.color;
                        ctx.stroke();
                    }
                    
                    // çƒŸèŠ±å…‰æ™•
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size * 3, 0, Math.PI * 2);
                    const gradient = ctx.createRadialGradient(
                        this.x, this.y, 0,
                        this.x, this.y, this.size * 3
                    );
                    gradient.addColorStop(0, this.color + "60");
                    gradient.addColorStop(1, this.color + "00");
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                } else {
                    // ç»˜åˆ¶æ™®é€šé—ªçƒç²’å­
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // æ·»åŠ é—ªçƒæ•ˆæœ
                    if (Math.random() > 0.7) {
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
                        const gradient = ctx.createRadialGradient(
                            this.x, this.y, 0,
                            this.x, this.y, this.size * 1.5
                        );
                        gradient.addColorStop(0, this.color + "80");
                        gradient.addColorStop(1, this.color + "00");
                        ctx.fillStyle = gradient;
                        ctx.fill();
                    }
                }
                
                ctx.restore();
            }
            
            // æ£€æŸ¥ç²’å­æ˜¯å¦åº”è¯¥è¢«ç§»é™¤
            isAlive() {
                return this.life > 0;
            }
            
            // å½“ç²’å­è¢«ç§»é™¤æ—¶å‡å°‘è®¡æ•°å™¨
            destroy() {
                particleCount--;
            }
        }
        
        // åˆ›å»ºç²’å­
        function createParticles(x, y, count = 15) {
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(x, y, currentColorScheme));
            }
            // æ’­æ”¾æ°´æ™¶éŸ³æ•ˆ
            playCrystalSound(x, y);
        }
        
        // åŠ¨ç”»å¾ªç¯
        function animate() {
            // æ¸…é™¤ç”»å¸ƒå¹¶è®¾ç½®èƒŒæ™¯
            const bgGradient = ctx.createRadialGradient(
                canvas.width / 2, canvas.height / 2, 0,
                canvas.width / 2, canvas.height / 2, canvas.width
            );
            const colors = colorSchemes[currentColorScheme].bgGradient;
            bgGradient.addColorStop(0, colors[0]);
            bgGradient.addColorStop(1, colors[1]);
            
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // æ·»åŠ ä¸€äº›èƒŒæ™¯æ˜Ÿæ˜Ÿ
            drawBackgroundStars();
            
            // æ›´æ–°å’Œç»˜åˆ¶æ‰€æœ‰ç²’å­
            for (let i = 0; i < particles.length; i++) {
                const particle = particles[i];
                particle.update();
                particle.draw();
                
                // ç§»é™¤ç”Ÿå‘½å‘¨æœŸç»“æŸçš„ç²’å­
                if (!particle.isAlive()) {
                    particle.destroy();
                    particles.splice(i, 1);
                    i--;
                }
            }
            
            // æ›´æ–°ç²’å­è®¡æ•°å™¨æ˜¾ç¤º
            document.getElementById('particle-count').textContent = particleCount;
            
            requestAnimationFrame(animate);
        }
        
        // ç»˜åˆ¶èƒŒæ™¯æ˜Ÿæ˜Ÿ
        function drawBackgroundStars() {
            const starCount = 100;
            const starColors = colorSchemes[currentColorScheme].colors;
            
            for (let i = 0; i < starCount; i++) {
                // åªåœ¨ç¬¬ä¸€æ¬¡ç»˜åˆ¶æ—¶ç”Ÿæˆæ˜Ÿæ˜Ÿä½ç½®
                if (!window.starPositions) {
                    window.starPositions = [];
                    for (let j = 0; j < starCount; j++) {
                        window.starPositions.push({
                            x: Math.random() * canvas.width,
                            y: Math.random() * canvas.height,
                            size: Math.random() * 1.5 + 0.5,
                            twinkle: Math.random() * 0.5 + 0.5,
                            speed: Math.random() * 0.02 + 0.01
                        });
                    }
                }
                
                const star = window.starPositions[i];
                
                // è®¡ç®—é—ªçƒæ•ˆæœ
                const twinkle = Math.sin(Date.now() * star.speed) * 0.3 + 0.7;
                
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size * twinkle, 0, Math.PI * 2);
                ctx.fillStyle = starColors[Math.floor(Math.random() * starColors.length)] + "80";
                ctx.fill();
            }
        }
        
        // åˆ‡æ¢é…è‰²æ–¹æ¡ˆ
        function switchColorScheme() {
            currentColorScheme = (currentColorScheme + 1) % colorSchemes.length;
            updateColorSchemeDisplay();
        }
        
        // æ›´æ–°é…è‰²æ–¹æ¡ˆæ˜¾ç¤º
        function updateColorSchemeDisplay() {
            document.getElementById('current-color-name').textContent = colorSchemes[currentColorScheme].name;
            
            // æ›´æ–°ä¸»é¢˜ç‚¹æ´»åŠ¨çŠ¶æ€
            const dots = document.querySelectorAll('.theme-dot');
            dots.forEach((dot, index) => {
                if (index === currentColorScheme) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }
        
        // åˆ›å»ºä¸»é¢˜è‰²ç‚¹
        function createThemeDots() {
            const container = document.getElementById('theme-dots');
            
            colorSchemes.forEach((scheme, index) => {
                const dot = document.createElement('div');
                dot.className = `theme-dot ${index === currentColorScheme ? 'active' : ''}`;
                dot.style.backgroundColor = scheme.colors[2];
                dot.title = scheme.name;
                dot.addEventListener('click', () => {
                    currentColorScheme = index;
                    updateColorSchemeDisplay();
                });
                container.appendChild(dot);
            });
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
            let mouseX = 0;
            let mouseY = 0;
            let mouseMoveTimer = null;
            
            canvas.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // ä½¿ç”¨é˜²æŠ–æŠ€æœ¯å‡å°‘ç²’å­åˆ›å»ºé¢‘ç‡
                if (!mouseMoveTimer) {
                    mouseMoveTimer = setTimeout(() => {
                        createParticles(mouseX, mouseY);
                        mouseMoveTimer = null;
                    }, 30); // æ¯30msåˆ›å»ºä¸€æ¬¡ç²’å­
                }
            });
            
            // è§¦æ‘¸ç§»åŠ¨äº‹ä»¶ï¼ˆç§»åŠ¨è®¾å¤‡æ”¯æŒï¼‰
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                mouseX = touch.clientX;
                mouseY = touch.clientY;
                
                if (!mouseMoveTimer) {
                    mouseMoveTimer = setTimeout(() => {
                        createParticles(mouseX, mouseY, 10); // ç§»åŠ¨è®¾å¤‡ä¸Šåˆ›å»ºè¾ƒå°‘ç²’å­
                        mouseMoveTimer = null;
                    }, 50);
                }
            }, { passive: false });
            
            // åˆ‡æ¢é…è‰²æ–¹æ¡ˆ
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    switchColorScheme();
                }
            });
            
            // çª—å£å¤§å°è°ƒæ•´
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                // æ¸…é™¤æ˜Ÿæ˜Ÿä½ç½®ï¼Œä»¥ä¾¿é‡æ–°ç”Ÿæˆé€‚åº”æ–°å°ºå¯¸
                window.starPositions = null;
            });
            
            // é˜»æ­¢ä¸Šä¸‹æ–‡èœå•
            canvas.addEventListener('contextmenu', (e) => {
                e.preventDefault();
            });
        }
        
        // åˆå§‹åŒ–
        function init() {
            initAudio();
            initEventListeners();
            createThemeDots();
            animate();
            
            // åˆå§‹åˆ›å»ºä¸€äº›ç²’å­
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createParticles(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height,
                        Math.floor(Math.random() * 10) + 5
                    );
                }, i * 300);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>